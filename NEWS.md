# *News*

# scFlow 0.5.0 _(14/05/2020)_

## New Features

* Adaptive thresholding for per-sample QC.  The `annotate_sce()` function now accepts "adaptive" as a threshold value for upper limits on various cell metrics together with a Median Absolute Deviation (MAD) threshold (default 3.5).  This allows QC thresholds to be determined on a per-sample basis, improving integration of datasets from different sources.  The `report_qc_sce()` function now plots and describes these adaptive thresholds.

* Dirichlet modeling for statistically significant differences in cell-type abundance.  The `model_celltype_freqs()` function allows flexible cell-type differential abundance analyses, with an accompanying function to generate a report `report_celltype_model()`.

* Cell type metric annotations generated by `annotate_celltype_metrics()` with an accompanying report produced by `report_celltype_metrics()`.  Currently includes three sections: (1) reduced dimensionality plots, (2) cell-type proportions by groups, and (3) distributions of various metrics for each cell-type.

* Improvements in the QC report generated by `report_qc_sce()`, including new CSS styling.  Key information is now summarized at the beginning of the report.

* Pseudobulking algorithm improved to utilize matrix multiplication instead of lapply: typical 1-2 orders of magnitude speed increase.


# scFlow 0.4.0 _(14/02/2020)_

## New features

* `annotate_merged_sce()` and `report_merged_sce()` to examine QC metrics across samples to facilitate identification of problematic samples.

* `find_cells()` annotates cells / empty drops using the EmptyDrops algorithm.  The single-sample QC report generated by `report_qc_sce()` now includes EmptyDrops results with metrics and plots of  algorithm performance.

* `integrate_sce()` runs LIGER on a SingleCellExperiment created by `merge_sce()`, storing the H.norm factors in a `reducedDim()` slot available as an input for dimensionality reduction.

* `reduce_dims_sce()` now includes a parameter for `input_reduced_dim` which accepts one or more of PCA and Liger as input, producing `tSNE_PCA`, `tSNE_Liger`, `UMAP_PCA`, `UMAP_Liger` etc. allowing dimensionality reductions with and without integration to be examined.

* Improved annotation of SingleCellExperiment celltypes by `map_celltypes_sce()` to enable three new functions to write (`write_celltype_mappings()`), read (`read_celltype_mappings()`), and update (`map_custom_celltypes()`) the celltype mappings for a SingleCellExperiment.  This enables cluster -> celltype mappings to be quickly and easily revised if needed.

* `find_impacted_pathways()` and `report_impacted_pathways()` allow a differential gene expression table to be submitted to WebGestalt and ROntoTools (and in future additional tools) and an interactive report to be generated.
