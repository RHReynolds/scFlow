---
title: "<b>scflow</b> - Merged Multi-Sample Quality-Control Report"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    theme: "flatly"
    toc: false
    fig_caption: true
    keep_md: false
    css: style.css
    includes:
      after_body: footer.html
params:
  metadata_path: false
---

```{r setup, results='hide', include=FALSE}
library(plotly)
library(DT)
library(dplyr)
library(utils)

knitr::opts_chunk$set(echo = FALSE)

knitr::knit_hooks$set(wrap = function(before, options, envir){
  if (before){
    paste0('<', options$wrap, ' align="center">')
  } else {
    paste0('</', options$wrap, '>')
  }
})
```

```{r load_data, results='hide', include=FALSE}
#metadata <- readRDS(params$metadata_path)
metadata <- readRDS("/home/ckhozoie/Documents/scflow/scemeta.rds")
```

## Multi-Sample Summary Plots

```{r, results='asis', fig.align="center", fig.width=10, fig.height=4, fig.cap = ""}
knitr::opts_chunk$set(echo = FALSE)
for(plot_var in names(metadata$merged_plots)) {
  cat(sprintf("<p><h3>%s</h3></p>", plot_var))
  for(plot in plot_var){
    print(metadata$merged_plots[[plot_var]][[plot]])
  }
}
```


## References
``` {r, results='asis', eval = (!is.null(metadata$citations))}
knitr::opts_chunk$set(echo = FALSE)
cat(apply(metadata$citations, 1, .print_citation_html))
```

<br>scflow v`r utils::packageVersion("scflow")` -- `r Sys.time()`
